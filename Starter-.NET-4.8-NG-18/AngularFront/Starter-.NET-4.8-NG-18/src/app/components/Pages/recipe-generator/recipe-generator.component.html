<div class="recipe-generator-container">
  <div class="generator-header">
    <h1>ü•© AI Beef Chef</h1>
    <p>Generate personalized beef recipes based on your cooking skills and preferences</p>
    
    <!-- User usage status -->
    <div *ngIf="userUsage" class="usage-status">
      <div class="usage-info" [class.premium]="userUsage.PlanStatus === 'Premium'">
        <span class="plan-badge">{{ userUsage.PlanStatus }}</span>
        <span class="usage-count">{{ userUsage.RemainingRecipes }} recipes remaining today</span>
        <button *ngIf="userUsage.PlanStatus === 'Free'" class="upgrade-btn" (click)="goToUpgrade()">
          ‚≠ê Upgrade to Premium
        </button>
      </div>
    </div>
  </div>

  <!-- Complexity Slider -->
  <app-complexity-slider 
    [value]="recipeRequest.ComplexityLevel"
    (valueChange)="onComplexityChange($event)">
  </app-complexity-slider>

  <!-- Beef Cut Selector -->
  <app-beef-cut-selector
    [selectedCutId]="recipeRequest.BeefCutID"
    (cutSelected)="onCutSelected($event)">
  </app-beef-cut-selector>

  <!-- Recipe Configuration Form -->
  <div class="recipe-form-container">
    <h3>üçΩÔ∏è Recipe Configuration</h3>
    
    <div class="form-row">
      <div class="form-group">
        <label for="numberOfDiners">Number of Diners</label>
        <input 
          type="number" 
          id="numberOfDiners"
          [(ngModel)]="recipeRequest.NumberOfDiners"
          min="1" 
          max="20"
          class="form-input number-input"
        />
      </div>

      <div class="form-group">
        <label for="dinerAges">Age Groups</label>
        <select 
          id="dinerAges"
          [(ngModel)]="recipeRequest.DinerAges"
          class="form-input"
        >
          <option value="">Select age groups</option>
          <option *ngFor="let option of dinerAgeOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="cookingMethod">Cooking Method</label>
        <select 
          id="cookingMethod"
          [(ngModel)]="recipeRequest.CookingMethod"
          class="form-input"
          required
        >
          <option value="">Choose cooking method</option>
          <option *ngFor="let method of cookingMethods" [value]="method">
            {{ method }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="cookingTime">Cooking Time</label>
        <select 
          id="cookingTime"
          [(ngModel)]="recipeRequest.CookingTimeMinutes"
          class="form-input"
        >
          <option *ngFor="let time of cookingTimes" [value]="time.value">
            {{ time.label }}
          </option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="dietaryRestrictions">Dietary Preferences (Optional)</label>
      <select 
        id="dietaryRestrictions"
        [(ngModel)]="recipeRequest.DietaryRestrictions"
        class="form-input"
      >
        <option value="">No specific dietary restrictions</option>
        <option *ngFor="let option of dietaryOptions" [value]="option">
          {{ option }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="userPrompt">Special Requests (Optional)</label>
      <textarea 
        id="userPrompt"
        [(ngModel)]="recipeRequest.UserPrompt"
        placeholder="e.g., 'Make it spicy', 'Use Mediterranean flavors', 'Include garlic and herbs'"
        class="form-input textarea-input"
        rows="3"
      ></textarea>
      <small class="input-help">
        Tell the AI chef any specific flavors, ingredients, or cooking style you prefer
      </small>
    </div>

    <!-- Error message -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <!-- Generate button -->
    <div class="generate-section">
      <button 
        class="generate-btn"
        [disabled]="!canGenerate()"
        (click)="onGenerate()"
      >
        <span *ngIf="!isGenerating">ü§ñ Generate My Recipe!</span>
        <span *ngIf="isGenerating">
          <div class="spinner"></div>
          Cooking up your recipe...
        </span>
      </button>

      <div *ngIf="!userUsage?.CanGenerateMore && userUsage" class="limit-message">
        <p>You've reached your daily limit. <a href="#" (click)="goToUpgrade()">Upgrade to Premium</a> for 30 recipes per day!</p>
      </div>

      <div *ngIf="!canGenerate() && userUsage?.CanGenerateMore" class="form-validation">
        <p>Please select a beef cut and cooking method to generate your recipe.</p>
      </div>
    </div>
  </div>

  <!-- Recipe preview -->
  <div *ngIf="selectedCut" class="recipe-preview">
    <h4>üìã Recipe Preview</h4>
    <div class="preview-content">
      <div class="preview-item">
        <strong>Beef Cut:</strong> {{ selectedCut.Name }}
      </div>
      <div class="preview-item">
        <strong>Skill Level:</strong> 
        <span class="complexity-indicator">
          {{ recipeRequest.ComplexityLevel }}/5 
          <span *ngFor="let i of [1,2,3,4,5]" [class]="i <= recipeRequest.ComplexityLevel ? 'star-filled' : 'star-empty'">‚òÖ</span>
        </span>
      </div>
      <div class="preview-item">
        <strong>Serves:</strong> {{ recipeRequest.NumberOfDiners }} people
      </div>
      <div class="preview-item" *ngIf="recipeRequest.CookingMethod">
        <strong>Method:</strong> {{ recipeRequest.CookingMethod }}
      </div>
      <div class="preview-item">
        <strong>Time:</strong> {{ recipeRequest.CookingTimeMinutes }} minutes
      </div>
    </div>
  </div>
</div>