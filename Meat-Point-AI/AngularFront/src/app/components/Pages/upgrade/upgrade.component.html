<div class="upgrade-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>{{ 'UPGRADE.LOADING' | translate }}</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading" class="upgrade-content">
    
    <!-- Header -->
    <div class="upgrade-header">
      <button class="back-btn" (click)="goBack()">{{ 'UPGRADE.BACK_BUTTON' | translate }}</button>
      <h1>{{ 'UPGRADE.TITLE' | translate }}</h1>
      <p>{{ 'UPGRADE.SUBTITLE' | translate }}</p>
    </div>

    <!-- Current Subscription Status -->
    <div *ngIf="subscriptionStatus" class="subscription-status">
      <div 
        class="status-card" 
        [class.premium]="subscriptionStatus.PlanStatus === 'Premium'"
        [class.free]="subscriptionStatus.PlanStatus === 'Free'"
      >
        <div class="status-header">
          <h3>{{ 'UPGRADE.CURRENT_PLAN' | translate }}: {{ subscriptionStatus.PlanStatus }}</h3>
          <div class="status-badge" [class.premium]="subscriptionStatus.PlanStatus === 'Premium'">
            {{ subscriptionStatus.PlanStatus === 'Premium' ? '⭐ PREMIUM' : '🆓 FREE' }}
          </div>
        </div>
        
        <div *ngIf="subscriptionStatus.IsActive && subscriptionStatus.RenewalDate" class="renewal-info">
          <p><strong>Next billing:</strong> {{ getRenewalDateDisplay() }}</p>
        </div>
      </div>
    </div>

    <!-- Plan Comparison -->
    <div class="plans-comparison">
      <h2>Choose Your MEAT POINT AIy Level</h2>
      
      <div class="plans-grid">
        
        <!-- Free Plan -->
        <div class="plan-card free-plan">
          <div class="plan-header">
            <h3>🆓 Free Plan</h3>
            <div class="plan-price">$0<span>/month</span></div>
          </div>
          
          <div class="plan-features">
            <h4>What you get:</h4>
            <ul>
              <li class="feature-item">
                <span class="feature-icon">📝</span>
                <span>3 AI recipes per day</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">🥩</span>
                <span>All beef cut education</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">📋</span>
                <span>Basic recipe generation</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">📄</span>
                <span>PDF recipe exports</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">🏠</span>
                <span>Perfect for occasional cooking</span>
              </li>
            </ul>
          </div>
          
          <div class="plan-limits">
            <div class="limit-item">
              <span class="limit-number">3</span>
              <span class="limit-label">Recipes/Day</span>
            </div>
          </div>
        </div>

        <!-- Premium Plan -->
        <div class="plan-card premium-plan">
          <div class="plan-badge">MOST POPULAR</div>
          
          <div class="plan-header">
            <h3>⭐ Premium Plan</h3>
            <div class="plan-price">$10<span>/month</span></div>
          </div>
          
          <div class="plan-features">
            <h4>Everything in Free, plus:</h4>
            <ul>
              <li class="feature-item premium-feature">
                <span class="feature-icon">🚀</span>
                <span>30 AI recipes per day</span>
              </li>
              <li class="feature-item premium-feature">
                <span class="feature-icon">⚡</span>
                <span>Priority recipe generation</span>
              </li>
              <li class="feature-item premium-feature">
                <span class="feature-icon">🎯</span>
                <span>Advanced customization options</span>
              </li>
              <li class="feature-item premium-feature">
                <span class="feature-icon">📅</span>
                <span>Meal planning features</span>
              </li>
              <li class="feature-item premium-feature">
                <span class="feature-icon">💝</span>
                <span>Save unlimited favorites</span>
              </li>
              <li class="feature-item premium-feature">
                <span class="feature-icon">👨‍🍳</span>
                <span>Perfect for serious home chefs</span>
              </li>
            </ul>
          </div>
          
          <div class="plan-limits premium-limits">
            <div class="limit-item">
              <span class="limit-number">30</span>
              <span class="limit-label">Recipes/Day</span>
            </div>
            <div class="limit-item">
              <span class="limit-number">10×</span>
              <span class="limit-label">More Recipes</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Messages -->
    <div *ngIf="errorMessage" class="message error-message">
      {{ errorMessage }}
    </div>
    
    <div *ngIf="successMessage" class="message success-message">
      {{ successMessage }}
    </div>

    <!-- Action Buttons -->
    <div class="action-section">
      
      <!-- Upgrade Button (for Free users) -->
      <div *ngIf="subscriptionStatus?.PlanStatus === 'Free'" class="upgrade-section">
        <h3>Ready to Master More Beef Cuts?</h3>
        <p class="upgrade-description">
          Join thousands of home cooks who've upgraded their beef cooking skills with Premium!
        </p>
        
        <button 
          class="upgrade-btn"
          [disabled]="isProcessing"
          (click)="onUpgradeToPremium()"
        >
          <span *ngIf="!isProcessing">
            🔥 Upgrade to Premium - $10/month
          </span>
          <span *ngIf="isProcessing">
            <div class="spinner"></div>
            Processing...
          </span>
        </button>
        
        <div class="payment-info">
          <p class="demo-note">
            <strong>Demo Mode:</strong> This is a demonstration. No actual payment will be processed.
            Click "Upgrade" to simulate the premium subscription experience.
          </p>
          
          <div class="payment-security">
            <span class="security-icon">🔒</span>
            <span>Secure payment processing by Stripe</span>
          </div>
          
          <div class="money-back">
            <span class="guarantee-icon">💯</span>
            <span>30-day money-back guarantee</span>
          </div>
        </div>
      </div>

      <!-- Premium User Actions -->
      <div *ngIf="subscriptionStatus?.PlanStatus === 'Premium'" class="premium-section">
        <div class="premium-benefits">
          <h3>🎉 You're a Premium Member!</h3>
          <p>Enjoy unlimited beef recipe generation and advanced features.</p>
          
          <div class="premium-stats">
            <div class="stat-item">
              <span class="stat-number">30</span>
              <span class="stat-label">Daily Recipes</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">∞</span>
              <span class="stat-label">Saved Favorites</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">⚡</span>
              <span class="stat-label">Priority Access</span>
            </div>
          </div>
          
          <button class="continue-cooking-btn" (click)="goBack()">
            👨‍🍳 Continue Cooking
          </button>
        </div>

        <div class="subscription-management">
          <h4>Manage Subscription</h4>
          <button 
            class="cancel-btn"
            [disabled]="isProcessing"
            (click)="onCancelSubscription()"
          >
            Cancel Subscription
          </button>
        </div>
      </div>
    </div>

    <!-- Testimonials -->
    <div class="testimonials-section">
      <h3>What Our Premium Members Say</h3>
      <div class="testimonials-grid">
        <div class="testimonial">
          <div class="testimonial-text">
            "Went from burning steaks to perfect ribeyes every time! Worth every penny."
          </div>
          <div class="testimonial-author">- Mike, Former Stupid Dad</div>
        </div>
        <div class="testimonial">
          <div class="testimonial-text">
            "The beef cut education transformed how I shop and cook. Amazing!"
          </div>
          <div class="testimonial-author">- Sarah, Home Chef</div>
        </div>
        <div class="testimonial">
          <div class="testimonial-text">
            "30 recipes a day means I never run out of dinner ideas. Game changer!"
          </div>
          <div class="testimonial-author">- David, Busy Parent</div>
        </div>
      </div>
    </div>
  </div>
</div>