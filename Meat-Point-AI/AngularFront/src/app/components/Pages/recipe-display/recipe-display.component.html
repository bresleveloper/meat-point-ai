<div class="recipe-display-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>{{ 'COMMON.LOADING' | translate }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage" class="error-state">
    <div class="error-icon">‚ùå</div>
    <h3>{{ 'COMMON.ERROR' | translate }}</h3>
    <p>{{ errorMessage }}</p>
    <button class="back-btn" (click)="goBack()">{{ 'RECIPE_DISPLAY.BACK' | translate }}</button>
  </div>

  <!-- Recipe Content -->
  <div *ngIf="!isLoading && !errorMessage && recipe" class="recipe-content">
    


    <!-- Recipe Title Section -->
    <div class="recipe-title-section">
      <div class="title-content">
        <h1 class="recipe-title">{{ recipe.Title }}</h1>
        <p class="recipe-description">{{ recipe.Description }}</p>
        
        <div class="recipe-meta">
          <div class="meta-item">
            <span class="meta-label">{{ 'RECIPE_DISPLAY.COMPLEXITY' | translate }}:</span>
            <span class="meta-value complexity">
              {{ getComplexityLabel(recipe.ComplexityLevel) }}
              <span class="stars">
                <span *ngFor="let star of getComplexityStars(recipe.ComplexityLevel)">{{ star }}</span>
              </span>
            </span>
          </div>
          
          <div class="meta-item">
            <span class="meta-label">{{ 'RECIPE_DISPLAY.SERVINGS' | translate }}:</span>
            <span class="meta-value">{{ recipe.NumberOfDiners }} people</span>
          </div>
          
          <div class="meta-item">
            <span class="meta-label">{{ 'RECIPE_DISPLAY.COOK_TIME' | translate }}:</span>
            <span class="meta-value">{{ getCookingTimeDisplay() }}</span>
          </div>
          
          <div class="meta-item" *ngIf="recipe.DinerAges">
            <span class="meta-label">{{ 'RECIPE_GENERATOR.AGE_GROUPS' | translate }}:</span>
            <span class="meta-value">{{ getDinerAgesDisplay() }}</span>
          </div>
        </div>
      </div>
    </div>


    <!-- Header with navigation -->
    <div class="recipe-header">
      <button class="back-btn" (click)="goBack()">‚Üê Back to Generator</button>
      
      <div class="header-actions">
        <button 
          class="favorite-btn"
          [class.active]="recipe.IsFavorite"
          (click)="toggleFavorite()"
        >
          {{ recipe.IsFavorite ? '‚ù§Ô∏è' : 'ü§ç' }} Favorite
        </button>
        
        <button class="pdf-btn" (click)="printPDF()">
          üìÑ Print PDF
        </button>
      </div>
    </div>

    <!-- View Toggle -->
    <div class="view-toggle">
      <button 
        class="toggle-btn"
        [class.active]="currentView === 'recipe'"
        (click)="switchView('recipe')"
      >
        üë®‚Äçüç≥ Recipe
      </button>
      <button 
        class="toggle-btn"
        [class.active]="currentView === 'shopping'"
        (click)="switchView('shopping')"
      >
        üõí Shopping List
      </button>
    </div>

    <!-- Recipe View -->
    <div *ngIf="currentView === 'recipe'" class="recipe-view">
      
      <!-- Ingredients Section -->
      <div class="ingredients-section">
        <h3>üìù Ingredients</h3>
        <div class="ingredients-by-category">
          <div 
            *ngFor="let category of getIngredientsByCategory() | keyvalue"
            class="ingredient-category"
          >
            <h4 class="category-title">{{ category.key }}</h4>
            <ul class="ingredient-list">
              <li *ngFor="let ingredient of category.value" class="ingredient-item">
                <span class="ingredient-quantity">{{ ingredient.quantity }}</span>
                <span class="ingredient-name">{{ ingredient.item }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Instructions Section -->
      <div class="instructions-section">
        <h3>üë©‚Äçüç≥ Cooking Instructions</h3>
        <ol class="instruction-list">
          <li *ngFor="let instruction of instructions; let i = index" class="instruction-item">
            <span class="step-number">{{ i + 1 }}</span>
            <span class="instruction-text">{{ instruction }}</span>
          </li>
        </ol>
      </div>

      <!-- Temperature Guide -->
      <div *ngIf="recipe.TemperatureGuide" class="temperature-section">
        <h3>üå°Ô∏è Temperature Guide</h3>
        <div class="temperature-content">
          {{ recipe.TemperatureGuide }}
        </div>
      </div>

      <!-- Additional Notes -->
      <div *ngIf="recipe.Notes" class="notes-section">
        <h3>üí° Additional Tips</h3>
        <div class="notes-content">
          {{ recipe.Notes }}
        </div>
      </div>
    </div>

    <!-- Shopping List View -->
    <div *ngIf="currentView === 'shopping'" class="shopping-view">
      <h3>üõí Shopping List</h3>
      <p class="shopping-intro">Take this list to the grocery store or butcher</p>
      
      <div class="shopping-by-category">
        <div 
          *ngFor="let category of getShoppingListByCategory() | keyvalue"
          class="shopping-category"
        >
          <h4 class="category-title">{{ category.key }}</h4>
          <ul class="shopping-list">
            <li *ngFor="let item of category.value" class="shopping-item">
              <input type="checkbox" class="shopping-checkbox" id="item-{{ item.item }}">
              <label [for]="'item-' + item.item" class="shopping-label">
                <span class="item-name">{{ item.item }}</span>
                <span *ngIf="item.notes" class="item-notes">({{ item.notes }})</span>
              </label>
            </li>
          </ul>
        </div>
      </div>

    </div>

  </div>
</div>